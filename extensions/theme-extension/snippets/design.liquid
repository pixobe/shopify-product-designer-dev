{% liquid
  assign button_radius_value = button_border_radius | default: 14
  assign button_bg_color = button_background_color | default: '#000000'
  assign button_text_color_value = button_text_color | default: '#ffffff'
  assign full_width_class = ''
  if button_full_width
    assign full_width_class = ' product-form-buttons--full'
  endif
%}

{% assign current_variant = product.selected_or_first_available_variant %}

<div class="product-form-buttons{{ full_width_class }}">
  <button
    type="button"
    class="product-customize-button"
    data-product="{{ product.id }}"
    data-variant="{{current_variant.id}}"
    onclick="openPixobeCustomization(event);"
    style="
      --button-radius: {{ button_radius_value }}px;
      --button-bg: {{ button_bg_color }};
      --button-text-color: {{ button_text_color_value }};
    "
  >
    <span>
      {{ 'button.customize' | t }}
    </span>
    <div class="swrapper">
      <icon-spinner></icon-spinner>
    </div>
  </button>
</div>
<dialog data-pixobe-dialog></dialog>

<script>
  // Expose localized labels from the theme locale under `window.pixobeLabels`.
  // Each value is JSON-encoded to ensure safe JS string escaping.
  window.pixobeLabels = {
    addToCart: {{ 'app.addToCart' | t | json }},
    closeButton: {{ 'app.closeButton' | t | json }},
    saveButton: {{ 'app.saveButton' | t | json }},
    objectOutsideCanvas: {{ 'app.objectOutsideCanvas' | t | json }},
    productInfoHeader: {{ 'app.productInfoHeader' | t | json }},
    images: {{ 'app.images' | t | json }},
    gallery: {{ 'app.gallery' | t | json }},
    text: {{ 'app.text' | t | json }},
    graphics: {{ 'app.graphics' | t | json }},
    create: {{ 'app.create' | t | json }},
    textEditor: {{ 'app.textEditor' | t | json }},
    imageEditor: {{ 'app.imageEditor' | t | json }},
    addNew: {{ 'app.addNew' | t | json }},
    allowedImageTypesText: {{ 'app.allowedImageTypesText' | t | json }},
    flipText: {{ 'app.flipText' | t | json }},
    rotateText: {{ 'app.rotateText' | t | json }},
    editImage: {{ 'app.editImage' | t | json }},
    editText: {{ 'app.editText' | t | json }},
    fontText: {{ 'app.fontText' | t | json }},
    fontColor: {{ 'app.fontColor' | t | json }},
    generatorTextPlaceholder: {{ 'app.generatorTextPlaceholder' | t | json }},
    generatorError: {{ 'app.generatorError' | t | json }},
    generatingImagesHeader: {{ 'app.generatingImagesHeader' | t | json }},
    generatingImagesMessage: {{ 'app.generatingImagesMessage' | t | json }},
    generateImageLabel: {{ 'app.generateImageLabel' | t | json }},
    promptRequiredError: {{ 'app.promptRequiredError' | t | json }},
    timedoutError: {{ 'app.timedoutError' | t | json }},
    describeImageLabel: {{ 'app.describeImageLabel' | t | json }},
    helpRequiredButtonLabel: {{ 'app.helpRequiredButtonLabel' | t | json }},
    helpRequiredHeading: {{ 'app.helpRequiredHeading' | t | json }},
    helpRequiredIconLabel: {{ 'app.helpRequiredIconLabel' | t | json }},
    socialMediaLabel: {{ 'app.socialMediaLabel' | t | json }},
    downloadingHeader: {{ 'app.downloadingHeader' | t | json }},
    downloadingMessage: {{ 'app.downloadingMessage' | t | json }},
    nodatafound: {{ 'app.nodatafound' | t | json }}
  };
</script>
