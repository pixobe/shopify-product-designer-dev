import{r as t,g as o,h as s,H as i}from"./p-CjXuplqk.js";import{Q as n,l as e}from"./p-BOTfGNKw.js";import{d as a,D as r}from"./p-DnVG-eLa.js";import"./p-wEiFdH97.js";import"./p-1UZM8gEX.js";import"./p-CTas5jXM.js";import"./p-gQj3JY6U.js";function c(t,o){t.set({scaleX:t.scaleX*o,scaleY:t.scaleY*o,left:t.left*o,top:t.top*o}),t.setCoords()}function p(t){const o=t.backgroundImage,s=Math.floor(o.width*o.scaleX),i=Math.floor(o.height*o.scaleY),e=n.findScaleToFit({width:s,height:i},t);c(o,e),t.setDimensions({width:s*e,height:i*e}),function(t,o){t.getObjects().forEach((t=>{c(t,o)}))}(t,e)}const h=class{constructor(o){t(this,o)}get el(){return o(this)}data;config;media;background=!0;filename="customization.svg";isLoaded=!1;fabricCanvasList=[];download=t=>{a(this.fabricCanvasList[t],this.media[t].grid.etching||this.config.etching,this.background,this.filename)};async componentDidLoad(){const t=this.el.shadowRoot;for(let o=0;o<this.data.length;o++){const s=t.querySelector(`[data-index="${o}"]`),i=t.clientWidth||800,n=t.clientHeight||600;s.style.width=`${i}px`,s.style.height=`${n}px`,s.width=i,s.height=n;const a=new e(s,{selection:!1}),c=this.data[o];await a.loadFromJSON(c),p(a);const h=this.media[o].etching||this.config.etching;for(const t of a.getObjects())t.set({selectable:!1}),h&&await r.create(t,"#000000");a.requestRenderAll(),this.fabricCanvasList.push(a)}}render(){return s(i,{key:"ddd01847d6fadac4f243708c46e4c9f7fe8b0069"},this.data.map(((t,o)=>s("div",{class:"wrapper"},s("canvas",{"data-index":o}),s("button",{onClick:()=>this.download(o)},s("icon-download",null))))))}};h.style=":host{display:flex;width:100%;min-height:100%;justify-content:center;align-items:center;flex-direction:column}:host .wrapper{position:relative}:host .wrapper button{background:none;outline:none;border:none;position:absolute;top:10px;right:10px}:host .wrapper button:hover{transform:scale(1.1);cursor:pointer}";export{h as p_viewer}