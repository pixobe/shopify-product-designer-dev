import{r as t,g as s,h as i,H as e}from"./p-CjXuplqk.js";import{l as h,C as a}from"./p-BOTfGNKw.js";import{P as n}from"./p-wEiFdH97.js";const r=class{constructor(s){t(this,s)}get el(){return s(this)}config;async getConfig(){return this.grid.toJSON()}onConfigChange(t){if(this.grid){const s=t.grid?.stroke;s&&(this.grid.set({stroke:s}),this.fabricCanvas.renderAll())}}canvas;grid;fabricCanvas;async componentDidLoad(){const t=this.el.shadowRoot.host,s=t.clientWidth||800,i=t.clientHeight||600,e=new h(this.canvas,{width:s,height:i}),r=await a.fromURL(this.config.url);if(!r)return;const o=Math.min(s/r.width,i/r.height);r.scale(o),e.backgroundImage=r,e.setDimensions({height:r.getScaledHeight(),width:r.getScaledWidth()}),this.grid=n.create(e.width,e.height,this.config.grid),e.add(this.grid),e.renderAll(),this.el.style.width=`${e.width}px`,this.el.style.height=`${e.height}px`,this.fabricCanvas=e}render(){return i(e,{key:"59cff0d76f2b492e5c66d2545d8430bf70f21698",style:{display:"block",width:"100%",height:"100%"}},i("canvas",{key:"8a24e8e99b770e6e17684b0082209d6d00bbd142",ref:t=>this.canvas=t}))}static get watchers(){return{config:["onConfigChange"]}}};r.style=":host{display:block}";export{r as p_grid}