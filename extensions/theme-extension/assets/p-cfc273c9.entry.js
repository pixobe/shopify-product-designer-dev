import{r as e,c as t,g as a,h as s,H as r}from"./p-CjXuplqk.js";import{P as i}from"./p-1UZM8gEX.js";import{s as o}from"./p-DIg7BVt4.js";import{s as n}from"./p-CTas5jXM.js";import{L as d}from"./p-CUiObClS.js";import"./p-BOTfGNKw.js";const c=class{constructor(a){e(this,a),this.promptEvent=t(this,"prompt")}get el(){return a(this)}controller;changes;isLoading=!1;generatedMessage="";promptEvent;promptRef;onChangesUpdated(e){if(this.isLoading=!1,e.images){const t=o.generatedImages;4===t.length&&t.shift(),t.push(...e.images),o.generatedImages=t}e.message&&(this.generatedMessage=e.message)}async generate(){const e=this.promptRef?.value?.trim();if(e)return this.promptEvent.emit({prompt:e}),this.isLoading=!0,new Promise((e=>{const t=()=>{this.isLoading?requestAnimationFrame(t):e()};t()}));this.changes={message:o.labels.promptRequiredError}}async onImageClicked(e){await this.controller.update(i.type,{src:e}),this.close()}close=()=>{this.controller.emit("close")};renderResponse(){return this.generatedMessage?s("p",{class:"message"},this.generatedMessage):o.generatedImages?.length?s("div",null,s("h3",null,"Recently created"),s("div",{class:"images-wrapper"},o.generatedImages.map((e=>{const t=`data:image/png;base64,${e.src}`;return s("img",{src:t,alt:"Generated",class:"img-contain hover",onClick:()=>this.onImageClicked(t)})})))):null}render(){return s(r,{key:"5751120a1c22c400b22d91761b7e94fcf878386c"},s("nav-layout",{key:"06874e4cf169a59e9d88f30c48411f23fd6336b6"},s("h1",{key:"398085fd9c8118e4303f4e9657dd62dd1877045a",slot:"header"},o.labels.generateImageLabel),s("div",{key:"efc9e8b472357982563e81b584d06ee7753299b2",slot:"main",class:"main-content"},s("form",{key:"b814327da4a499ed50d4a52f12d24e606edadab8"},s("div",{key:"64b27e589fe44d382c90415c27e443d2f8900ad9",class:"form-elements"},s("multi-line",{key:"179b12737450f7a944ca730b8e482d81b251012e",label:o.labels.describeImageLabel,placeholder:o.labels.generatorTextPlaceholder,name:"prompt",ref:e=>this.promptRef=e})),this.renderResponse(),s("div",{key:"8e64a7ace863ed256502162973550e8a91918a5a",class:"html-wrapper"},this.controller.aihelpContent&&s("div",{key:"56d92cad0ed6d1f49e544f61d5963ef2ddd25673",innerHTML:n(this.controller.aihelpContent),class:"helper-html"})))),s("div",{key:"b3b60aa6bc644e2e92614941d5f5d22b5f092db7",slot:"footer"},s("button",{key:"8d34c207510c3f4d2a0ef8f5b575de603a69091e",class:"button-secondary",type:"button",onClick:()=>this.close()},o.labels.closeButton),s("button",{key:"af0bfd283e3116e681bbe658219afef570d289d8",class:"button-primary",onClick:async()=>await this.generate(),type:"button"},o.labels.create))))}static get watchers(){return{changes:["onChangesUpdated"]}}};(function(e,t,a,s){var r,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(o=(i<3?r(o):i>3?r(t,a,o):r(t,a))||o);i>3&&o&&Object.defineProperty(t,a,o)})([d({header:o.labels.generatingImagesHeader,message:o.labels.generatingImagesMessage})],c.prototype,"generate",null),c.style=".images-wrapper{display:grid;grid-template-columns:repeat(2, 1fr);gap:12px;max-width:100%;width:100%;box-sizing:border-box;overflow:hidden;padding:0.5rem}.images-wrapper img{width:100%;height:auto;object-fit:contain;transition:opacity 0.3s ease}.images-wrapper img:hover{cursor:pointer;box-shadow:1px 0 0 1px var(--box-shadow), 0 1px 0 1px var(--box-shadow)}.message{text-align:center;color:var(--error-text);text-align:left}.html-wrapper{max-width:100%;overflow-x:auto;padding:0.5rem;box-sizing:border-box}.html-wrapper img{width:100%;object-fit:contain}h3{font-size:14px;color:var(--text-tertiary)}";export{c as image_generator}