import{r as t,c as e,g as r,h as o,H as a}from"./p-CjXuplqk.js";import{c as i}from"./p-BzuyuWe6.js";const s=class{constructor(r){t(this,r),this.colorChange=e(this,"colorChange"),this.colorInput=e(this,"colorInput"),r.$hostElement$["s-ei"]?this.internals=r.$hostElement$["s-ei"]:(this.internals=r.$hostElement$.attachInternals(),r.$hostElement$["s-ei"]=this.internals)}get el(){return r(this)}name;value;label;swatches;isOpen=!1;colorChange;colorInput;internals;componentWillLoad(){this.internals.setFormValue(this.value)}componentDidLoad(){document.addEventListener("keydown",this.handleKeydown),document.addEventListener("pointerup",this.handleOutsideClick)}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeydown),document.removeEventListener("pointerup",this.handleOutsideClick)}handleKeydown=t=>{"Escape"===t.key&&(this.isOpen=!1)};handleOutsideClick=t=>{this.el.contains(t.target)||(this.isOpen=!1)};toggleColorPicker=t=>{t.stopPropagation(),this.isOpen=!this.isOpen,this.isOpen&&requestAnimationFrame((()=>{const t=this.el.shadowRoot?.querySelector(".clrpick-wrap");if(t){const e=i(this.el);Object.assign(t.style,{top:e.top,bottom:e.bottom,left:e.left,right:e.right})}}))};onColorChange=t=>{const e=t.detail;requestAnimationFrame((()=>{this.value=e,this.internals.setFormValue(this.value),this.colorChange.emit(this.value)}))};onColorInput=t=>{const e=t.detail;requestAnimationFrame((()=>{this.value=e,this.internals.setFormValue(this.value),this.colorInput.emit(this.value)}))};renderColorPicker=()=>o("div",{class:"clrpick-wrap",onClick:t=>t.stopPropagation()},this.isOpen&&o("color-picker",{color:this.value,onColorChange:this.onColorChange,onColorInput:this.onColorInput,swatches:this.swatches}));render(){return o(a,{key:"5ad72e868fe9559427da63b529a50a9cefa470e9"},o("div",{key:"9a5da8b6820e48d0129a445fe9058ade1a27e90a",class:"form-element horizontal"},o("button",{key:"21f07170f95a3a1ad00cfd978725321c735051dd",onPointerUp:t=>this.toggleColorPicker(t),type:"button"},o("div",{key:"1d6ef6014e05fb3a28da989e71cb0c3467c7a047",class:"clr-block",style:{backgroundColor:this.value},title:"Pick color",role:"button"}),o("label",{key:"d806c335d29af662c6f29b319cc4339352d60c18"},this.label)),this.renderColorPicker()))}static get formAssociated(){return!0}};function n({r:t,g:e,b:r}){t/=255,e/=255,r/=255;const o=Math.max(t,e,r),a=Math.min(t,e,r);let i=0,s=0;const n=(o+a)/2;if(o===a)i=s=0;else{const l=o-a;switch(s=n>.5?l/(2-o-a):l/(o+a),o){case t:i=(e-r)/l+(e<r?6:0);break;case e:i=(r-t)/l+2;break;case r:i=(t-e)/l+4}i/=6}return{h:Math.round(360*i),s:Math.round(100*s),l:Math.round(100*n)}}s.style=":host{display:block;font-family:system-ui, sans-serif;font-size:inherit;font-weight:normal;color:var(--text-primary)}:host .form-element{position:relative}:host .form-element label{display:block;color:var(--text-primary);font-size:14px;font-weight:450;margin-bottom:4px;font-family:system-ui, -apple-system;text-align:left}:host .form-element textarea,:host .form-element input,:host .form-element select{all:unset;display:block;box-sizing:border-box;width:100%;height:36px;border-radius:8px;padding-bottom:6px;padding-left:12px;padding-right:12px;padding-top:6px;font-size:15px;text-align:left;color:var(--text-primary);border:1px solid var(--quaternary-background);background-color:var(--primary-background)}:host .form-element textarea:focus,:host .form-element input:focus,:host .form-element select:focus{outline:1px solid var(--active-border)}:host .form-element textarea::placeholder,:host .form-element input::placeholder,:host .form-element select::placeholder{color:var(--placeholder);opacity:1}:host .form-element textarea::-webkit-input-placeholder,:host .form-element input::-webkit-input-placeholder,:host .form-element select::-webkit-input-placeholder{color:var(--placeholder)}:host .form-element textarea::-moz-placeholder,:host .form-element input::-moz-placeholder,:host .form-element select::-moz-placeholder{color:var(--placeholder)}:host .form-element textarea:-ms-input-placeholder,:host .form-element input:-ms-input-placeholder,:host .form-element select:-ms-input-placeholder{color:var(--placeholder)}:host .form-element textarea::-ms-input-placeholder,:host .form-element input::-ms-input-placeholder,:host .form-element select::-ms-input-placeholder{color:var(--placeholder)}:host .form-element textarea{height:auto}:host .form-element.horizontal{display:flex;flex-direction:row;align-items:center}:host .form-element.horizontal label{margin-bottom:0px}:host button{all:unset;display:block;position:relative;border:none;outline:none;margin:0;padding:0;background-color:transparent}:host button.button-rounded{border-radius:50%;padding:4px}:host .button-group{display:flex;gap:1rem}:host{position:relative;width:100%;height:fit-content}:host .clrpick-wrap{position:absolute;z-index:10}:host .form-element{width:100%}:host .form-element button{display:grid;grid-template-columns:18px 1fr;align-items:center;gap:8px;padding:0;background:none;cursor:pointer;box-sizing:border-box;width:100%;height:auto}:host .form-element button .clr-block{display:block;width:16px;height:16px;margin-bottom:0;border-radius:4px;border:1px solid var(--text-tertiary);background-color:var(--tertiary-background)}:host(.block-style) .form-element button{display:flex;flex-direction:column-reverse;align-items:start}:host(.block-style) .form-element button .clr-block{height:16px;padding:4px;width:100%}";const l=t=>{let e=t.r.toString(16),r=t.g.toString(16),o=t.b.toString(16);return t.r<16&&(e="0"+e),t.g<16&&(r="0"+r),t.b<16&&(o="0"+o),"#"+e+r+o};class c{a;_hex;_rgb;_hsl;constructor(t={a:1,hex:"#000000"}){this.a=t.a,t.hex?(this._hex=t.hex,this._rgb=function(t){t.startsWith("#")&&(t=t.slice(1)),3===t.length&&(t=t.split("").map((t=>t+t)).join(""));const e=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);return 8===t.length&&parseInt(t.substring(6,8),16),isNaN(e)||isNaN(r)||isNaN(o)?{r:0,g:0,b:0}:{r:e,g:r,b:o}}(t.hex),this._hsl=n(this._rgb)):t.rgb?(this._rgb=t.rgb,this._hex=l(t.rgb),this._hsl=n(t.rgb)):t.hsl&&(this._hsl=t.hsl,this._rgb=(t=>{const e=t.h,r=t.l/100,o=r*(t.s/100),a=o*(1-Math.abs(e/60%2-1)),i=r-o;let s=0,n=0,l=0;return e>=0&&e<60?(s=o,n=a,l=0):e>=60&&e<120?(s=a,n=o,l=0):e>=120&&e<180?(s=0,n=o,l=a):e>=180&&e<240?(s=0,n=a,l=o):e>=240&&e<300?(s=a,n=0,l=o):(s=o,n=0,l=a),{r:Math.round(255*(s+i)),g:Math.round(255*(n+i)),b:Math.round(255*(l+i))}})(t.hsl),this._hex=l(this._rgb))}get rgb(){return this._rgb}get hsl(){return this._hsl}get hex(){return this._hex}get hsla(){return`hsla(${this.hsl.h}, ${this.hsl.s}%, ${this.hsl.l}%, ${this.a})`}get rgba(){const{r:t,g:e,b:r}=this.rgb;return`rgba(${t}, ${e}, ${r}, ${this.a})`}get hexa(){const t=Math.round(255*this.a).toString(16).padStart(2,"0");return`${this.hex}${t}`}}var h=function(t,e,r,o){var a,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};function d(t,e,r){const o=r.value;return r.value=function(...t){const e=o.apply(this,t),r=this.currentColor,a=this.el;if(r&&a){const t=r.rgb,e=Number((1-r.a).toFixed(2));a.style.setProperty("--alpha-slider-thumb-background",`rgba(250,250,250, ${e})`),a.style.setProperty("--alpha-slider-track-background",`${t.r}, ${t.g}, ${t.b}`)}return e},r}const p=class{constructor(r){t(this,r),this.colorChangeEvent=e(this,"colorChange"),this.colorInputEvent=e(this,"colorInput"),this.swatchUpdateEvent=e(this,"swatchUpdate")}get el(){return r(this)}color;swatches;editable=!1;colorChangeEvent;colorInputEvent;swatchUpdateEvent;currentColor;swatchList=[];alpha=1;currentPoint={x:0,y:0};coloringAreaRef;markerRef;isPointerDown=!1;markerPosition={x:0,y:0};get matrixColor(){return`hsla(${this.currentColor.hsl.h}, 100%, 50%)`}componentWillLoad(){this.swatchList=this.swatches?this.swatches.split(","):[],this.alpha=this.alpha?this.alpha:1;const t=(this.color&&""!==this.color.trim()?this.color:null)??(this.swatchList[0]&&""!==this.swatchList[0].trim()?this.swatchList[0]:null)??"#cacaca";this.currentColor=new c({hex:t,a:this.alpha})}componentDidLoad(){this.updateMarkerPositionFromColor()}onHueChange(t){const e=parseInt(t.target?.value,10),r=this.currentColor.hsl;this.currentColor=new c({hsl:{h:e,s:r.s,l:r.l},a:this.alpha})}onAlphaChange(t){const e=parseInt(t.target?.value,10)/100;this.alpha=e,this.currentColor.a=e}onColorPickerMove(t){if(t.stopPropagation(),!this.isPointerDown)return;const e=this.coloringAreaRef.getBoundingClientRect(),r=Math.max(0,Math.min(e.width,t.clientX-e.left)),o=Math.max(0,Math.min(e.height,t.clientY-e.top)),a=this.markerRef;a&&(a.style.left=`${r}px`,a.style.top=`${o}px`),this.currentColor=new c({hsl:{h:this.currentColor.hsl.h,s:r/e.width*100,l:100-o/e.height*100},a:this.alpha}),this.colorInputEvent.emit(this.currentColor.hexa)}onPointerDown=t=>{t.stopPropagation(),this.isPointerDown=!0,this.coloringAreaRef.setPointerCapture(t.pointerId),this.onColorPickerMove(t)};onPointerUp=t=>{if(t.stopPropagation(),this.isPointerDown=!1,t.pointerId)try{this.coloringAreaRef.releasePointerCapture(t.pointerId)}catch(t){console.error(t)}this.colorChangeEvent.emit(this.currentColor.hexa)};updateMarkerPositionFromColor(){const{s:t,l:e}=this.currentColor.hsl;if(!this.coloringAreaRef||!this.markerRef)return;const r=this.coloringAreaRef.getBoundingClientRect(),o=(100-e)/100*r.height;this.markerRef.style.left=t/100*r.width+"px",this.markerRef.style.top=`${o}px`}addSwatch=t=>{this.swatchList.push(t),this.swatchList=[...this.swatchList],this.swatchUpdateEvent.emit(this.swatchList.join(","))};onSwatchSelected=(t,e)=>{if(t.stopPropagation(),this.editable){const t=this.swatchList.findIndex((t=>t===e));this.swatchList.splice(t,1),this.swatchList=[...this.swatchList],this.swatchUpdateEvent.emit(this.swatchList.join(","))}else this.currentColor=new c({hex:e,a:this.alpha}),this.updateMarkerPositionFromColor(),this.colorChangeEvent.emit(this.currentColor.hexa)};handleHexKeyDown(t){"Enter"===t.key&&(this.currentColor=new c({hex:t.target.value,a:this.alpha}),this.updateMarkerPositionFromColor(),this.colorChangeEvent.emit(this.currentColor.hexa))}render(){return o(a,{key:"4f036e6cabdbbbb013c6dd62fe07a8ecf12b9000"},o("div",{key:"a83edcba581bedf7cf0758848cefb01e5d7551d6",class:"clr-picker",onPointerUp:this.onPointerUp},o("div",{key:"14200868c634939a56de3a139e5244bf52d9969a",id:"clr-color-area",class:"clr-matrix",role:"application",style:{color:this.matrixColor},onPointerMove:t=>this.onColorPickerMove(t),onPointerDown:this.onPointerDown,ref:t=>this.coloringAreaRef=t},o("div",{key:"edfe494e3ca58cc45a5575ec65a8145645000200",id:"clr-color-marker",class:"clr-marker",tabindex:"0",ref:t=>this.markerRef=t})),o("div",{key:"12ee3a6733262913d82de1268f3870b7a29adc94",class:"clr-controls"},o("div",{key:"87e288d64bcdea451a532de6eec985eb877fb129",class:"clr-hue"},o("input",{key:"a8e28494623f3814363071e71f77de11f597549e",id:"clr-hue-slider",type:"range",min:"0",max:"360",step:"1","aria-label":"Hue slider",class:"custom-slider",value:this.currentColor?.hsl.h??0,onInput:t=>this.onHueChange(t)}),o("div",{key:"dfc3f937ce6295b38c307d8ba27054d25e60e837",id:"clr-hue-marker"})),o("div",{key:"c10110754dad8cfe82e8ab29394ac99f48a4ece9",class:"clr-alpha"},o("input",{key:"c6bee6136dcbf0747b6c63902f1815d1cc38de9b",id:"clr-alpha-slider",type:"range",min:"0",max:"100",step:"1","aria-label":"Opacity slider",class:"custom-slider",value:100*this.alpha,onInput:t=>this.onAlphaChange(t)}),o("span",{key:"13f84ac167a40f64679ef078169c9627434cdd3e"})),o("div",{key:"39f470c4839927a243913033e9b0668e9962326d",class:"clr-info"},o("button",{key:"f440585c8bf04e8eda071c85f0207fa2e461e98f",id:"clr-color-preview",class:"clr-preview",type:"button","aria-label":"Current color",style:{backgroundColor:this.currentColor.rgba}}),o("input",{key:"f0b335712ed33a50b0437b3631223a92835c13cb",id:"clr-color-value",class:"clr-code",type:"text","aria-label":"Color value field",value:this.currentColor.hex,name:"hex",onKeyDown:this.handleHexKeyDown.bind(this)})),o("div",{key:"8753988fafa135cdb1353bc6ad0b85c9f18e23ed",class:"clr-swatches"},this.swatchList?.map((t=>o("button",{style:{backgroundColor:t},class:"clr-swatch",onPointerUp:e=>this.onSwatchSelected(e,t)}))),this.editable&&o("button",{key:"ce958af98250a7f9a1a504249141b3336d06cf22",class:"clr-add",onPointerUp:()=>this.addSwatch(this.currentColor.hex)},o("icon-add",{key:"dc237a9e18b9531b541ca8aff7d31c90ac32a558"}))))))}};function u(t,e,r){const o=e.match(/[^.[\]]+/g)||[];let a=t;for(let t=0;t<o.length;t++){const e=o[t],i=o[t+1];if(t===o.length-1)return void(a[e]="string"!=typeof r||"true"!==r.toLowerCase()&&"false"!==r.toLowerCase()?r:"true"===r.toLowerCase());const s=i&&!isNaN(Number(i));a[e]||(a[e]=s?[]:{}),a=a[e]}}function f(t,e){if(!t||"string"!=typeof e)return"";const r=e.replace(/\[(\w+)\]/g,".$1").split(".");let o=t;for(const t of r){if(!o||"object"!=typeof o||!(t in o))return"";o=o[t]}return o}h([d],p.prototype,"componentWillLoad",null),h([d],p.prototype,"onHueChange",null),h([d],p.prototype,"onAlphaChange",null),h([d],p.prototype,"onColorPickerMove",null),p.style=":host button{all:unset;display:block;position:relative;border:none;outline:none;margin:0;padding:0;background-color:transparent}:host button.button-rounded{border-radius:50%;padding:4px}:host .button-group{display:flex;gap:1rem}:host input[type=range]{-webkit-appearance:none;-moz-appearance:none;appearance:none}:host input[type=range]:focus{outline:none}:host input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}:host input[type=range]::-moz-range-thumb{border:none}:host .custom-slider{display:block;border-radius:12px;margin:0;padding:0;box-sizing:border-box;width:100%}:host .custom-slider::-webkit-slider-runnable-track{display:flex;align-items:center;border-radius:12px;height:24px;box-sizing:border-box}:host .custom-slider::-moz-range-track{display:flex;align-items:center;border-radius:12px;height:24px;box-sizing:border-box}:host .custom-slider::-moz-range-thumb{position:relative;width:20px;height:20px;margin-top:2px;border-radius:50%;box-shadow:0 0 0 2px #ffffff;outline:1px solid #ffffff;background-color:transparent}:host .custom-slider::-webkit-slider-thumb{position:relative;width:20px;height:20px;margin-top:2px;border-radius:50%;box-shadow:0 0 0 2px #ffffff;outline:1px solid #ffffff;background-color:transparent}:host{display:block;width:216px;font-size:16px;font-family:system-ui, sans-serif}:host .clr-picker{display:flex;flex-direction:column;border-radius:8px;direction:ltr;-moz-user-select:none;-webkit-user-select:none;user-select:none;box-shadow:0 0 5px rgba(0, 0, 0, 0.05), 0 5px 20px rgba(0, 0, 0, 0.1)}:host .clr-controls{display:flex;flex-direction:column;padding:16px;gap:16px;background-color:var(--primary-background)}:host .clr-matrix{position:relative;width:100%;height:100px;border-radius:3px 3px 0 0;background-color:currentColor;background-image:linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, #000 100%), linear-gradient(to right, #fff 0%, rgba(255, 255, 255, 0) 100%);cursor:pointer}:host .clr-matrix .clr-marker{position:absolute;width:12px;height:12px;margin:-6px 0 0 -6px;border-radius:50%;cursor:pointer;background-color:currentColor;box-shadow:0 0 2px rgba(0, 0, 0, 0.5);top:0;left:0;color:rgba(255, 255, 255, 0.2);border:3px solid #fff}:host .clr-matrix .clr-marker:focus{outline:none}:host .clr-info{display:grid;grid-template-columns:auto 1fr;gap:8px}:host .clr-info .clr-preview{position:relative;width:28px;height:28px;border-radius:50%;overflow:hidden;border:1px solid var(--quaternary-background)}:host .clr-info .clr-code{display:block;margin:0;padding:0;box-sizing:border-box;width:100%;border-radius:16px;padding:0 8px;text-align:center;color:var(--text-primary);border:1px solid var(--quarternary-background);background-color:var(--tertiary-background);text-transform:uppercase}:host .clr-info .clr-code:focus{outline:var(--quarternary-background)}:host .clr-swatches{display:flex;flex-wrap:wrap;justify-content:center;box-sizing:border-box;align-items:center;gap:8px}:host .clr-swatches .clr-swatch,:host .clr-swatches .clr-add{cursor:pointer;display:flex;justify-content:center;align-items:center;height:24px;width:24px;border-radius:50%;border:1px solid var(--quaternary-background)}:host .clr-swatches .clr-swatch:hover .icon-trash{display:block}:host .clr-swatches .clr-add{color:var(--text-tertiary);background-color:var(--tertiary-background)}:host #clr-hue-slider::-webkit-slider-runnable-track{background-image:linear-gradient(to right, #f00 0%, #ff0 16.66%, #0f0 33.33%, #0ff 50%, #00f 66.66%, #f0f 83.33%, #f00 100%)}:host #clr-hue-slider::-moz-range-track{background-image:linear-gradient(to right, #f00 0%, #ff0 16.66%, #0f0 33.33%, #0ff 50%, #00f 66.66%, #f0f 83.33%, #f00 100%)}:host #clr-alpha-slider::-webkit-slider-runnable-track{background-image:linear-gradient(to right, rgba(var(--alpha-slider-track-background), 0) 0%, rgba(var(--alpha-slider-track-background), 1) 100%), repeating-linear-gradient(45deg, #aaa 25%, transparent 25%, transparent 75%, #aaa 75%, #aaa), repeating-linear-gradient(45deg, #aaa 25%, #fff 25%, #fff 75%, #aaa 75%, #aaa);background-repeat:no-repeat, repeat, repeat;background-position:0 0, 0 0, 4px 4px;background-size:auto, 8px 8px, 8px 8px}:host #clr-alpha-slider::-moz-range-track{background-image:linear-gradient(to right, rgba(var(--alpha-slider-track-background), 0) 0%, rgba(var(--alpha-slider-track-background), 1) 100%), repeating-linear-gradient(45deg, #aaa 25%, transparent 25%, transparent 75%, #aaa 75%, #aaa), repeating-linear-gradient(45deg, #aaa 25%, #fff 25%, #fff 75%, #aaa 75%, #aaa);background-repeat:no-repeat, repeat, repeat;background-position:0 0, 0 0, 4px 4px;background-size:auto, 8px 8px, 8px 8px}:host #clr-alpha-slider::-moz-range-thumb{background-color:var(--alpha-slider-thumb-background, #ffffff)}:host #clr-alpha-slider::-webkit-slider-thumb{background-color:var(--alpha-slider-thumb-background, #ffffff)}";const b=class{constructor(e){t(this,e)}get el(){return r(this)}data;ref;onDataChanges(t){this.setValue(t)}async formData(){const t={},e=this.getFormElements();for(const r of e)u(t,r.name,r.value);return t}componentDidLoad(){this.setValue(this.data)}setValue=t=>{const e=this.getFormElements();if(e)for(const r of e){const e=r.name;if(e){const o=f(t,e);r.value=o}}};getFormElements(){const t=this.el.shadowRoot?.querySelector("slot");return t.assignedElements({flatten:!0}).flatMap((t=>t.formAssociated||t.name?[t]:Array.from(t.querySelectorAll("input, select, textarea, [name]")))).filter((t=>!!t.name&&void 0===t.dataset.ignore))}render(){return o(a,{key:"732f437c78f0ebd17837183143b038023a60f497"},o("form",{key:"3714887d3bd6c4c3d71969281b33ffb7bda34e56",ref:t=>this.ref=t},o("slot",{key:"cf94dbbb2f0b259a1b96e8f91d7bb4000e31e068"})))}static get watchers(){return{data:["onDataChanges"]}}};b.style=":host{display:block;font-family:system-ui, sans-serif;font-size:inherit;font-weight:normal;color:var(--text-primary)}";export{s as color_input,p as color_picker,b as html_form}