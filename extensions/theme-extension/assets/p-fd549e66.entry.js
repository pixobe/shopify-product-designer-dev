import{r as e,g as a,h as l}from"./p-CjXuplqk.js";import{P as r}from"./p-1UZM8gEX.js";import{s as t}from"./p-DIg7BVt4.js";import{L as i}from"./p-CUiObClS.js";import"./p-BOTfGNKw.js";import"./p-CTas5jXM.js";const o=class{constructor(a){e(this,a)}get el(){return a(this)}props=r.defaults;controller;openRef;refreshed=0;form;toggle=e=>{this.openRef?.classList.remove("expanded");const a=this.el.querySelector(`[data-radio= ${e}]`);a!=this.openRef?(a.classList.add("expanded"),this.openRef=a):this.openRef=void 0};async addImage(e){const a=Object.assign(this.props,{src:e});await this.controller.update(r.type,a),this.close()}onFileInputEvent=async e=>{const a=e.detail;a&&this.addImage(a[0])};componentDidLoad(){const e=new IntersectionObserver(((e,a)=>{e.forEach((e=>{if(e.isIntersecting){const l=e.target;l.src=l.getAttribute("data-src"),a.unobserve(l)}}))})),a=this.el.querySelectorAll(".gallery-image");a?.forEach((a=>e.observe(a)))}close(){this.controller.emit("close")}render(){const e=this.controller.gallery;return l("nav-layout",{key:"8ca56d398567aaf80f8426f0a981bb4f84c65618"},l("h1",{key:"88bc68889ac90fd7ce0118611831b28fd4abaae8",slot:"header"},t.labels.imageEditor),l("div",{key:"3b96f564408e182bf80621becee994bbfafb5b5a",slot:"main",class:"main-slot"},l("div",{key:"2ab6ed0e652c9bfd114dcb722527fb70241794eb"},l("file-uploader",{key:"ad947105218a0cbf2dccb9da32fa910e01acc766",label:t.labels.allowedImageTypesText,onFileInput:this.onFileInputEvent})),l("div",{key:"9f26dd15dc3d656693747c1c97dd099f7a05a6e0",class:"gallery-list"},e.map(((e,a)=>{const r=`gallery-group-${a}`;return l("div",{key:a,class:"gallery"},l("label",{class:"gallery-label",htmlFor:r},l("div",{class:"img-content"},l("img",{src:e.images[0]?.url,title:e.name})),l("h3",null,e.name),l("input",{type:"radio",name:"gallery-group",id:r,onClick:()=>this.toggle(r)})),l("div",{class:"gallery-images expandable","data-radio":r},e.images.map(((e,a)=>l("button",{class:"gallery-button",key:a,onClick:()=>this.addImage(e.url)},l("img",{"data-src":e.url,class:"gallery-image",title:"Gallery Image"}))))))})))),l("div",{key:"a4030ccedc34d465afb9018aa1a1d2de6e6f6658",slot:"footer"},l("button",{key:"f9f9027253060cde0615a067d608759b2024cb9e",class:"button-secondary",type:"button",onClick:()=>this.close()},t.labels.closeButton)))}};(function(e,a,l,r){var t,i=arguments.length,o=i<3?a:null===r?r=Object.getOwnPropertyDescriptor(a,l):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,a,l,r);else for(var s=e.length-1;s>=0;s--)(t=e[s])&&(o=(i<3?t(o):i>3?t(a,l,o):t(a,l))||o);i>3&&o&&Object.defineProperty(a,l,o)})([i({})],o.prototype,"addImage",null),o.style=".main-slot{display:flex;flex-direction:column;gap:1rem}.gallery-list{display:flex;flex-direction:column;gap:4px;overflow:scroll;max-height:60%}.gallery-list input[type=radio]{display:none}.gallery-list input[type=radio]:checked~.gallery-items{display:grid}.gallery-list input[type=radio]:checked~.gallery-group{background-color:#b0b0b0}.gallery-list .expandable{overflow:hidden;max-height:0;transform:scaleY(0.9);opacity:0;transition:max-height 0.4s ease, transform 0.3s ease, opacity 0.3s ease}.gallery-list .expandable.expanded{max-height:99999px;transform:scaleY(1);opacity:1}.gallery-list .gallery{display:flex;flex-direction:column}.gallery-list .gallery .gallery-label{display:grid;grid-template-columns:48px 1fr;justify-content:center;align-items:center;gap:16px;background-color:var(--tertiary-background);padding:8px;box-sizing:border-box;border-radius:4px;cursor:pointer}.gallery-list .gallery .gallery-label:hover{background-color:var(--tertiary-background)}.gallery-list .gallery .gallery-label img{height:auto;width:100%;object-fit:cover;background-color:#e9e9e9}.gallery-list .gallery .gallery-images{display:grid;grid-template-columns:repeat(4, 1fr);gap:8px;background-color:var(--primary-background);padding:4px;box-sizing:border-box}.gallery-list .gallery .gallery-images .gallery-button{padding:0}.gallery-list .gallery .gallery-images .gallery-button .gallery-image{width:100%;height:100%;object-fit:contain;border-radius:4px;transition:transform 0.1s ease-in-out}.gallery-list .gallery .gallery-images .gallery-button .gallery-image:hover{box-shadow:0 2px 1px var(--box-shadow), 0 -1px 1px var(--box-shadow), 2px 0 1px var(--box-shadow), -1px 0 1px var(--box-shadow)}.gallery-list .gallery .gallery-images .gallery-button .gallery-image{background-blend-mode:multiply}";export{o as image_handler}