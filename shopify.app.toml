# Learn more about configuring your app at https://shopify.dev/docs/apps/tools/cli/configuration

client_id = "ab0f7182709851ef7296d79ecb2b8300"
name = "Product Designer Dev"
application_url = "https://mactunnel.pixobe.com"
embedded = true
handle = "product-designer-dev"

[build]
automatically_update_urls_on_dev = true

[webhooks]
api_version = "2025-07"

[[webhooks.subscriptions]]
topics = ["app/scopes_update"]
uri = "/webhooks/app/scopes_update"

[[webhooks.subscriptions]]
topics = ["app/uninstalled"]
uri = "/webhooks/app/uninstalled"

[access_scopes]
# Learn more at https://shopify.dev/docs/apps/tools/cli/configuration#access_scopes
scopes = "read_orders,read_products,read_metaobjects,unauthenticated_read_metaobjects,unauthenticated_read_product_listings,write_files,write_metaobjects,write_products,write_metaobject_definitions"

[auth]
redirect_urls = [
  "https://mactunnel.pixobe.com/auth/callback",
  "https://mactunnel.pixobe.com/auth/shopify/callback",
  "https://mactunnel.pixobe.com/api/auth/callback",
]

[app_proxy]
url = "https://mactunnel.pixobe.com/api"
subpath = "pixobe-product-designer"
prefix = "apps"

[pos]
embedded = false


[metaobjects.app.pixobe_media_entry]
name = "Pixobe Media Entry"
display_name_field = "config"
description = "Stores a media reference plus Pixobe's raw configuration payload."
access.admin = "merchant_read_write"
access.storefront = "public_read"

[metaobjects.app.pixobe_media_entry.fields.config]
name = "Config JSON"
type = "json"
description = "Arbitrary Pixobe configuration copied verbatim into the object's `config`."

[metaobjects.app.pixobe_product_settings]
name = "pixobe-product-settings"
display_name_field = "config"
description = "Persists the Pixobe app defaults used by the settings page."
access.admin = "merchant_read_write"
access.storefront = "public_read"

[metaobjects.app.pixobe_product_settings.fields.config]
name = "Settings JSON"
type = "json"
description = "Serialized default configuration captured from the settings form."

[product.metafields.app.pixobe_media_config]
type = "list.metaobject_reference<$app:pixobe_media_entry>"
name = "Pixobe Media Config"
description = "Ordered list of Pixobe media entries attached to the product."
access.storefront = "public_read"
access.admin = "merchant_read_write"
